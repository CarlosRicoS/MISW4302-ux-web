// ============================================================================
// ALL @USE RULES MUST BE FIRST (SCSS requirement)
// ============================================================================

// Angular Material Theme - @use must come before any other rules
@use '@angular/material' as mat;

// Import Figma color palette variables
@use 'styles/figma-colors';

// Import Material Design semantic color tokens
@use 'styles/semantic-colors';

// Import typography system
@use 'styles/typography';

// Import utility classes for colors and typography
@use 'styles/utilities';

// ============================================================================
// ANGULAR MATERIAL THEME CONFIGURATION
// ============================================================================

// Include the common styles for Angular Material
@include mat.core();

// Create a theme using the new Material 3 approach
$theme: mat.define-theme((
  color: (
    theme-type: light,
    primary: mat.$blue-palette,
    tertiary: mat.$orange-palette,
  ),
  typography: (
    brand-family: 'Lato',
    plain-family: 'Lato',
  )
));

// Apply the theme (this includes typography)
@include mat.all-component-themes($theme);

// Include Material Design typography classes
@include mat.typography-hierarchy($theme);

// Additional semantic color mappings in main styles root
:root {
  @include mat.slide-toggle-overrides((
    selected-icon-size: 0px,
    unselected-icon-size: 0px,
  ));

  @include mat.datepicker-overrides((
    calendar-date-selected-state-background-color: var(--mat-sys-primary),
    calendar-date-today-selected-state-outline-color: var(--mat-sys-primary),
    calendar-date-today-outline-color: var(--mat-sys-primary),
  ));

  @include mat.dialog-overrides((
    container-color: transparent,
    container-shape: 0px,
    actions-alignment: center,
    container-min-width: 70vw,
  ));

  @include mat.tabs-overrides((
    active-focus-label-text-color: var(--mat-sys-primary),
    active-label-text-color: var(--mat-sys-primary),
    active-hover-label-text-color: var(--mat-sys-primary),
    label-text-font: var(--mat-sys-typography-title-large-font-family),
    label-text-line-height: var(--mat-sys-typography-title-large-line-height),
    label-text-size: var(--mat-sys-typography-title-large-font-size),
    label-text-weight: var(--mat-sys-typography-title-large-font-weight),
    active-indicator-color: transparent,
    active-focus-indicator-color: transparent,
    active-hover-indicator-color: transparent,
    active-ripple-color: var(--mat-sys-primary),
    divider-height: 1px,
    container-height: 87px,
    divider-color: var(--mat-sys-outline-variant),
  ));

  --mat-sys-secondary-container: var(--fb-secondary-90);     // Secondary Container (#CEFFCD)
  --mat-sys-on-secondary-container: var(--fb-secondary-30);  // On Secondary Container (#003405)
  
  // Tertiary color tokens
  --mat-sys-tertiary: var(--fb-tertiary-40);                 // Tertiary (#4C0F00)
  --mat-sys-on-tertiary: var(--fb-tertiary-100);             // On Tertiary (#FFFFFF)
  
  // Global Material component overrides
  --mat-slide-toggle-selected-track-color: var(--fb-primary-40);
  --mat-slide-toggle-selected-pressed-track-color: var(--fb-primary-40);
  --mat-slide-toggle-selected-hover-track-color: var(--fb-primary-40);
  --mat-slide-toggle-selected-focus-track-color: var(--fb-primary-40);
  --mat-slide-toggle-selected-pressed-handle-color: var(--fb-primary-100);
  --mat-sys-tertiary-container: var(--fb-tertiary-90);       // Tertiary Container (#FFCBBC)
  --mat-sys-on-tertiary-container: var(--fb-tertiary-30);    // On Tertiary Container (#2F0600)
  
  // Error colors (using closest gray/primary matches for error state)
  --mat-sys-error: #B3261E;                                  // Error (Material Design standard)
  --mat-sys-on-error: var(--fb-primary-100);                 // On Error (#FFFFFF)
  --mat-sys-error-container: #F9DEDC;                        // Error Container (Material Design standard)
  --mat-sys-on-error-container: #852221;                     // On Error Container (Material Design standard)

  // Background and Surface colors using gray palette
  --mat-sys-background: var(--fb-gray-95);                   // Background (#FFFFFF)
  --mat-sys-on-background: var(--fb-gray-30);                // On Background (#1F1F20)
  --mat-sys-surface: var(--fb-gray-90);                      // Surface (#F2F2F2)
  --mat-sys-on-surface: var(--fb-gray-30);                   // On Surface (#1D1B20)
  
  // Extended Surface and Outline tokens
  --mat-sys-surface-variant: var(--fb-gray-85);              // Surface Variant (#E7E0EC)
  --mat-sys-on-surface-variant: var(--fb-gray-50);           // On Surface Variant (#49454F)
  --mat-sys-outline: var(--fb-gray-70);                      // Outline (#79747E)
  --mat-sys-outline-variant: var(--fb-gray-80);              // Outline Variant (#CAC4D0)
  --mat-sys-surface-tint: var(--fb-primary-65);              // Surface Tint (#6750A4)
  --mat-sys-shadow: var(--fb-gray-0);                        // Shadow (#000000)
  --mat-sys-scrim: var(--fb-gray-0);                         // Scrim (#000000)
  
  // Inverse Surface colors
  --mat-sys-inverse-surface: var(--fb-gray-40);              // Inverse Surface (#333333)
  --mat-sys-inverse-on-surface: var(--fb-gray-90);           // Inverse On Surface (#F2F2F2)
  --mat-sys-inverse-primary: var(--fb-primary-80);           // Inverse Primary (#BFADFF)
  
  // Primary Fixed colors (for elevated surfaces)
  --mat-sys-primary-fixed: var(--fb-primary-90);             // Primary Fixed (#CFD6FF)
  --mat-sys-on-primary-fixed: var(--fb-primary-10);          // On Primary Fixed (#00000F)
  --mat-sys-primary-fixed-dim: var(--fb-primary-80);         // Primary Fixed Dim (#BFADFF)
  --mat-sys-on-primary-fixed-variant: var(--fb-secondary-30); // On Primary Fixed Variant (#003405)
  
  // Secondary Fixed colors
  --mat-sys-secondary-fixed: var(--fb-secondary-90);         // Secondary Fixed (#CEFFCD)
  --mat-sys-on-secondary-fixed: var(--fb-secondary-10);      // On Secondary Fixed (#000C01)
  --mat-sys-secondary-fixed-dim: var(--fb-secondary-80);     // Secondary Fixed Dim (#81E382)
  --mat-sys-on-secondary-fixed-variant: var(--fb-secondary-30); // On Secondary Fixed Variant (#003405)
  
  // Tertiary Fixed colors
  --mat-sys-tertiary-fixed: var(--fb-tertiary-90);           // Tertiary Fixed (#FFCBBC)
  --mat-sys-on-tertiary-fixed: var(--fb-tertiary-10);        // On Tertiary Fixed (#020000)
  --mat-sys-tertiary-fixed-dim: var(--fb-tertiary-80);       // Tertiary Fixed Dim (#FF8564)
  --mat-sys-on-tertiary-fixed-variant: var(--fb-tertiary-30); // On Tertiary Fixed Variant (#2F0600)
  
  // Surface Container variations for elevated components
  --mat-sys-surface-dim: var(--fb-gray-70);                  // Surface Dim (#8C8C8C)
  --mat-sys-surface-bright: var(--fb-gray-90);               // Surface Bright (#F2F2F2)
  --mat-sys-surface-container-lowest: var(--fb-gray-100);    // Surface Container Lowest (#FFFFFF)
  --mat-sys-surface-container-low: var(--fb-gray-90);        // Surface Container Low (#F2F2F2)
  --mat-sys-surface-container: var(--fb-gray-85);            // Surface Container (#D7D7D7)
  // Override Material button colors using Figma semantic colors
  --mdc-filled-button-container-color: var(--mat-sys-primary);        // #0E117C
  --mdc-filled-button-label-text-color: var(--mat-sys-on-primary);    // #FFFFFF
  --mdc-outlined-button-outline-color: var(--mat-sys-primary);        // #0E117C
  --mdc-outlined-button-label-text-color: var(--mat-sys-primary);     // #0E117C
  --mdc-text-button-label-text-color: var(--mat-sys-primary);         // #0E117C
}

// ============================================================================
// GLOBAL STYLES
// ============================================================================

/* Global styles */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: 'Lato', 'Helvetica Neue', sans-serif;
  background-color: var(--mat-sys-background);
  color: var(--mat-sys-on-background);
}

* {
  box-sizing: border-box;
}

// ============================================================================
// CUSTOM COMPONENT STYLES
// ============================================================================

// Custom utility classes
.mat-elevation-z0 {
  box-shadow: none !important;
}

.full-width {
  width: 100%;
}

.text-center {
  text-align: center;
}

.mt-16 {
  margin-top: 16px;
}

.mb-16 {
  margin-bottom: 16px;
}

.p-16 {
  padding: 16px;
}

// Custom component styles
.app-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.card-container {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  margin: 16px 0;
}

.card-item {
  flex: 1;
  min-width: 280px;
}

.mat-mdc-menu-panel {
  max-width: unset !important;
  border-radius: var(--mat-sys-corner-extra-large) !important;
  box-shadow: none !important;
}

.mat-mdc-menu-content {
  padding: 0px !important;
  border-radius: var(--mat-sys-corner-extra-large);
}

.mat-calendar-body-label {
  display: none;
}

.mat-calendar-controls {
  margin-top: 0px !important;
}

.mat-calendar-body-cell-content.mat-focus-indicator.mat-calendar-body-today {
  color: var(--mat-sys-primary);
}

.mat-calendar-body-cell-content.mat-focus-indicator.mat-calendar-body-today.mat-calendar-body-selected {
  color: var(--fb-primary-100) !important;
}

.chart-dialog-backdrop.cdk-overlay-backdrop {
  background-color: var(--fb-primary-10);
  opacity: 70%;
}

.mdc-tab--active{
  .mdc-tab__content{
    border-bottom: solid 3px var(--mat-sys-primary);
  }
}

.container-chart-header{
  margin-bottom: 0px !important;
}

.mat-mdc-card-header {
  padding-top: 0px !important;
}

body {
  background-color: transparent;
}